# Maintainer: Geoffroy Carrier <geoffroy.carrier@aur.archlinux.org>
# Contributor: Serge Gielkens <gielkens.serge@mumeli.org>
pkgname=gimp-mathmap
pkgver=1.3.5
pkgrel=1
pkgdesc="A GIMP plug-in which allows distortion of images specified by mathematical formulae"
url="http://www.complang.tuwien.ac.at/schani/mathmap/"
depends=('gimp>=2.4' 'gsl' 'gtksourceview2' 'fftw' 'giflib')
source=(http://www.complang.tuwien.ac.at/schani/mathmap/files/mathmap-${pkgver}.tar.gz)
md5sums=('6ff66d070ea410dee1a27283d05b8beb')
arch=('i686' 'x86_64')
license=('GPL')
build() {
  cd "$srcdir/mathmap-$pkgver"
  make || return 1
  install -d "$pkgdir/usr/share/gimp/2.0/mathmap/expressions"
  install -d "$pkgdir"/usr/lib/gimp/2.0/plug-ins
  install -d $pkgdir/usr/share/gtksourceview-1.0/language-specs
  install -D mathmap "$pkgdir"/usr/bin/mathmap
  ln -s /usr/bin/mathmap "$pkgdir"/usr/lib/gimp/2.0/plug-ins/mathmap
  install -D new_template.c opmacros.h \
             generators/blender/blender_template.c generators/blender/blender_opmacros.h \
	     pixmaps/*.png "$pkgdir"/usr/share/gimp/2.0/mathmap
  install mathmap.lang "$pkgdir"/usr/share/gtksourceview-1.0/language-specs
  cp -r examples "$pkgdir"/usr/share/gimp/2.0/mathmap/expressions
}
