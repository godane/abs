# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: SmackleFunky <smacklefunky@optusnet.com.au>

pkgname=synce-odccm
pkgver=0.13
pkgrel=4
pkgdesc="provide a means of communication with a Windows CE device - daemon to communicate with a handheld device"
arch=('i686' 'x86_64')
url="http://synce.sourceforge.net/"
license=('GPL')
depends=('synce-libsynce' 'gnet' 'hal')
backup=(etc/dbus/system.d/odccm.conf)
source=(http://downloads.sourceforge.net/synce/odccm-$pkgver.tar.gz
	synce-odccm.rc
	dbus-error-fix.patch)
md5sums=('8f12585398f1a79518887d5f94cf122d'
         '5759fb86bb2af46d632c3807616c8999'
         '4eea398fe356fe0d8c57d65d6f24b3db')

build() {
  cd $srcdir/odccm-$pkgver

  patch -p1 <$srcdir/dbus-error-fix.patch

  ./configure --prefix=/usr
  make || return 1
  make DESTDIR=$pkgdir install || return 1

  install -D -m 644 $srcdir/odccm-$pkgver/src/odccm.conf $pkgdir/etc/dbus-1/system.d/odccm.conf
  install -D -m 755 $srcdir/synce-odccm.rc $pkgdir/etc/rc.d/synce-odccm
}
